\hypertarget{_shader_8cpp_source}{}\doxysection{Shader.\+cpp}
\label{_shader_8cpp_source}\index{Shader.cpp@{Shader.cpp}}
\mbox{\hyperlink{_shader_8cpp}{\mbox{[}詳解\mbox{]}}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00001}00001\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}\textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00002}00002\ \textcolor{comment}{//!\ @file\ \ \ Shader.cpp}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00003}00003\ \textcolor{comment}{//!\ @brief\ \ シェーダー}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00004}00004\ \textcolor{comment}{}\textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00005}00005\ \textcolor{preprocessor}{\#include\ <mutex>}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00006}00006\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00007}00007\ \textcolor{preprocessor}{\#include\ <d3d11.h>}\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ DirectX11}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00008}00008\ \textcolor{preprocessor}{\#include\ <d3dcompiler.h>}\ \ \ \ \textcolor{comment}{//\ シェーダーコンパイラ}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00009}00009\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00010}00010\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_file_watcher_8h}{System/FileWatcher.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00011}00011\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_shader_8h}{Shader.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00012}00012\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00013}00013\ \textcolor{comment}{//\ DirectX関連のリンク}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00014}00014\ \textcolor{preprocessor}{\#pragma\ comment(lib,\ "{}d3d11.lib"{}})}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00015}00015\ \textcolor{preprocessor}{\#pragma\ comment(lib,\ "{}dxgi.lib"{}})}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00016}00016\ \textcolor{preprocessor}{\#pragma\ comment(lib,\ "{}d3dcompiler.lib"{}})}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00018}00018\ \textcolor{keyword}{namespace\ }\{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00019}00019\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00020}00020\ \mbox{\hyperlink{class_file_watcher}{FileWatcher}}\ \ \ \ file\_watcher\_;\ \ \ \ \ \ \ \textcolor{comment}{//!<\ シェーダーホットリロード時のためのファイル監視}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00021}00021\ std::once\_flag\ once\_initialize\_;\ \ \ \ \textcolor{comment}{//!<\ 初回実行用フラグ}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00022}00022\ \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00023}00023\ \textcolor{comment}{//!\ 現在アクティブなシェーダーリスト}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00024}00024\ \textcolor{comment}{//!\ @note\ 起動時の初期化順序の都合で固定長配列にしている}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00025}00025\ \textcolor{comment}{//!\ @note\ 個数が足りなくなった場合は適宜増やす}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00026}00026\ \textcolor{comment}{}std::array<ShaderBase*,\ 1024>\ shaders\_;}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00027}00027\ \mbox{\hyperlink{_typedef_8h_a70c1fcc1a4e96af8f6580f708657cd41}{u32}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shader\_count\_;\ \ \ \ \textcolor{comment}{//\ シェーダー個数}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00028}00028\ \}\ \ \ \ \textcolor{comment}{//\ namespace}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00029}00029\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00030}00030\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}\textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00031}00031\ \textcolor{comment}{//!\ コンストラクタ}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00032}00032\ \textcolor{comment}{}\textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00033}\mbox{\hyperlink{class_shader_base_a0204b5fedb7d930a1978c2e5cd7a76d8}{00033}}\ \mbox{\hyperlink{class_shader_base_a0204b5fedb7d930a1978c2e5cd7a76d8}{ShaderBase::ShaderBase}}()\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00034}00034\ \ \ \ \ assert(shader\_count\_\ <\ shaders\_.size());}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00036}00036\ \ \ \ \ \textcolor{comment}{//\ シェーダーリストに登録}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00037}00037\ \ \ \ \ shaders\_[shader\_count\_]\ =\ \textcolor{keyword}{this};}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00038}00038\ \ \ \ \ shader\_count\_++;}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00039}00039\ \}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00040}00040\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00041}00041\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}\textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00042}00042\ \textcolor{comment}{//!\ 作成}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00043}00043\ \textcolor{comment}{}\textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00044}\mbox{\hyperlink{class_shader_base_a7fc34b708652290e485e4b6b73ad74d9}{00044}}\ \mbox{\hyperlink{class_shader_base_a0204b5fedb7d930a1978c2e5cd7a76d8}{ShaderBase::ShaderBase}}(std::string\_view\ path,\ \mbox{\hyperlink{_typedef_8h_a70c1fcc1a4e96af8f6580f708657cd41}{u32}}\ type,\ \mbox{\hyperlink{_typedef_8h_a70c1fcc1a4e96af8f6580f708657cd41}{u32}}\ variant\_count):\ \mbox{\hyperlink{class_shader_base}{ShaderBase}}()\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00045}00045\ \ \ \ \ assert(type\ <=\ DX\_SHADERTYPE\_HULL);}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00046}00046\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00047}00047\ \ \ \ \ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00048}00048\ \ \ \ \ \textcolor{comment}{//\ 初回実行時にファイル監視を開始する}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00049}00049\ \ \ \ \ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00050}00050\ \ \ \ \ \textcolor{comment}{//\ ファイル変更時のコールバック関数}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00051}00051\ \ \ \ \ \textcolor{keyword}{auto}\ file\_modified\_callback\ =\ [](\textcolor{keyword}{const}\ \textcolor{keywordtype}{wchar\_t}*\ \mbox{\hyperlink{class_shader_base_a6b7abbaa0020555a5413d2957b10ac0e}{path}})\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00052}00052\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ファイルパスの要素を分解}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00053}00053\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{wchar\_t}\ drive[MAX\_PATH];}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00054}00054\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{wchar\_t}\ dir[MAX\_PATH];}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00055}00055\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{wchar\_t}\ name[MAX\_PATH];}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00056}00056\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{wchar\_t}\ ext[MAX\_PATH];}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00057}00057\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00058}00058\ \ \ \ \ \ \ \ \ \_wsplitpath\_s(\mbox{\hyperlink{class_shader_base_a6b7abbaa0020555a5413d2957b10ac0e}{path}},\ drive,\ dir,\ name,\ ext);}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00059}00059\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00060}00060\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ シェーダーソースコードだった場合}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00061}00061\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(lstrcmpiW(ext,\ L\textcolor{stringliteral}{"{}.fx"{}})\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00062}00062\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{_typedef_8h_a70c1fcc1a4e96af8f6580f708657cd41}{u32}}\ i\ =\ 0;\ i\ <\ shader\_count\_;\ ++i)\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00063}00063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ shader\ \ \ \ \ \ \ \ =\ shaders\_[i];}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00064}00064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \ shader\_path\ \ \ =\ shader-\/>path()\ +\ L\textcolor{stringliteral}{"{}.fx"{}};}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00065}00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \ notified\_path\ =\ std::wstring(\mbox{\hyperlink{class_shader_base_a6b7abbaa0020555a5413d2957b10ac0e}{path}});}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00066}00066\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00067}00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 小文字に統一することで大文字小文字の差異をなくす}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00068}00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::transform(shader\_path.begin(),\ shader\_path.end(),\ shader\_path.begin(),}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00069}00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{wchar\_t}\ (*)(\textcolor{keywordtype}{wchar\_t})\textcolor{keyword}{>}(::tolower));}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00070}00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::transform(notified\_path.begin(),\ notified\_path.end(),\ notified\_path.begin(),}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00071}00071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{wchar\_t}\ (*)(\textcolor{keywordtype}{wchar\_t})\textcolor{keyword}{>}(::tolower));}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00072}00072\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00073}00073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(shader\_path\ ==\ notified\_path)\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00074}00074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 該当するシェーダーが見つかったら再コンパイル}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00075}00075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shader-\/>compile();}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00076}00076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00077}00077\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00078}00078\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00079}00079\ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00080}00080\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00081}00081\ \ \ \ \ \textcolor{comment}{//\ ファイル監視開始}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00082}00082\ \ \ \ \ std::call\_once(once\_initialize\_,\ [\&]()\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00083}00083\ \ \ \ \ \ \ \ \ file\_watcher\_.initialize(L\textcolor{stringliteral}{"{}."{}},\ file\_modified\_callback);}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00084}00084\ \ \ \ \ \});}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00085}00085\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00086}00086\ \ \ \ \ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00087}00087\ \ \ \ \ \textcolor{comment}{//\ 初期設定}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00088}00088\ \ \ \ \ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00089}00089\ \ \ \ \ \mbox{\hyperlink{class_shader_base_a5dec857ba2d4ed847904b07364c177ff}{path\_}}\ =\ \mbox{\hyperlink{_precompile_8cpp_a519b42bb9e2e54f0a92b1a75678dea07}{convertTo}}(\mbox{\hyperlink{class_shader_base_a6b7abbaa0020555a5413d2957b10ac0e}{path}});}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00090}00090\ \ \ \ \ \mbox{\hyperlink{class_shader_base_a576b747d3445083d36b1ff7a96716f90}{type\_}}\ =\ type;}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00091}00091\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00092}00092\ \ \ \ \ \textcolor{comment}{//\ 最低限1つのバリエーションを持つ}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00093}00093\ \ \ \ \ \textcolor{keywordflow}{if}(variant\_count\ ==\ 0)}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00094}00094\ \ \ \ \ \ \ \ \ variant\_count\ =\ 1;}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00095}00095\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00096}00096\ \ \ \ \ \mbox{\hyperlink{class_shader_base_a51245f424c7149da9229df13629f53a9}{handles\_}}.resize(variant\_count);}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00097}00097\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00098}00098\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\&\ x:\ \mbox{\hyperlink{class_shader_base_a51245f424c7149da9229df13629f53a9}{handles\_}})\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00099}00099\ \ \ \ \ \ \ \ \ x\ =\ -\/1;\ \ \ \ \textcolor{comment}{//\ デフォルト値}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00100}00100\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00101}00101\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00102}00102\ \ \ \ \ \mbox{\hyperlink{class_shader_base_ab1d4589b69640f0441028a0db68737bd}{compile}}();}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00103}00103\ \}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00104}00104\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00105}00105\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}\textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00106}00106\ \textcolor{comment}{//!\ デストラクタ}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00107}00107\ \textcolor{comment}{}\textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00108}\mbox{\hyperlink{class_shader_base_a568965693aa7bdea2e5f1e023c479aa7}{00108}}\ \mbox{\hyperlink{class_shader_base_a568965693aa7bdea2e5f1e023c479aa7}{ShaderBase::\string~ShaderBase}}()\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00109}00109\ \ \ \ \ \textcolor{comment}{//\ シェーダーリストから登録解除}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00110}00110\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00111}00111\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ std::find(std::begin(shaders\_),\ std::begin(shaders\_)\ +\ shader\_count\_,\ \textcolor{keyword}{this});}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00112}00112\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(it\ !=\ std::begin(shaders\_)\ +\ shader\_count\_)\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00113}00113\ \ \ \ \ \ \ \ \ \ \ \ \ shader\_count\_-\/-\/;}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00114}00114\ \ \ \ \ \ \ \ \ \ \ \ \ *it\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00115}00115\ \ \ \ \ \ \ \ \ \ \ \ \ std::swap(*it,\ shaders\_[shader\_count\_]);}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00116}00116\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00117}00117\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00118}00118\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00119}00119\ \ \ \ \ \textcolor{comment}{//\ シェーダーを解放}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00120}00120\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\&\ x:\ \mbox{\hyperlink{class_shader_base_a51245f424c7149da9229df13629f53a9}{handles\_}})\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00121}00121\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(x\ !=\ -\/1)\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00122}00122\ \ \ \ \ \ \ \ \ \ \ \ \ DeleteShader(x);}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00123}00123\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00124}00124\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00125}00125\ \}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00126}00126\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00127}00127\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00128}00128\ \textcolor{comment}{//\ \ ファイル監視を更新}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00129}00129\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00130}\mbox{\hyperlink{class_shader_base_acdb6390d6f38259727f2403bd04ec93e}{00130}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_shader_base_acdb6390d6f38259727f2403bd04ec93e}{ShaderBase::updateFileWatcher}}()\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00131}00131\ \ \ \ \ file\_watcher\_.update();}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00132}00132\ \}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00133}00133\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00134}00134\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}\textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00135}00135\ \textcolor{comment}{//!\ コンパイル実行}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00136}00136\ \textcolor{comment}{}\textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00137}\mbox{\hyperlink{class_shader_base_ab1d4589b69640f0441028a0db68737bd}{00137}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_shader_base_ab1d4589b69640f0441028a0db68737bd}{ShaderBase::compile}}()\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00138}00138\ \ \ \ \ \textcolor{comment}{//\ シェーダーソースの拡張子のパスを作成}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00139}00139\ \ \ \ \ std::wstring\ source\_path\ =\ \mbox{\hyperlink{class_shader_base_a5dec857ba2d4ed847904b07364c177ff}{path\_}}\ +\ L\textcolor{stringliteral}{"{}.fx"{}};}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00140}00140\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00141}00141\ \ \ \ \ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00142}00142\ \ \ \ \ \textcolor{comment}{//\ ファイルからソースファイルを読み込み}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00143}00143\ \ \ \ \ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00144}00144\ \ \ \ \ std::vector<std::byte>\ source;}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00145}00145\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00146}00146\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ファイルから読み込み}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00147}00147\ \ \ \ \ \ \ \ \ std::ifstream\ file(}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00148}00148\ \ \ \ \ \ \ \ \ \ \ \ \ source\_path.c\_str(),}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00149}00149\ \ \ \ \ \ \ \ \ \ \ \ \ std::ios::in\ |\ std::ios::binary\ |\ std::ios::ate);\ \ \ \ \textcolor{comment}{//\ ateを指定すると最初からファイルポインタが末尾に移動}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00150}00150\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!file.is\_open())\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00151}00151\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00152}00152\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00153}00153\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ size\ =\ file.tellg();}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00154}00154\ \ \ \ \ \ \ \ \ source.resize(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(size));}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00155}00155\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00156}00156\ \ \ \ \ \ \ \ \ file.seekg(0,\ std::ios::beg);}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00157}00157\ \ \ \ \ \ \ \ \ file.read(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(source.data()),\ size);}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00158}00158\ \ \ \ \ \ \ \ \ file.close();}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00159}00159\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00160}00160\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00161}00161\ \ \ \ \ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00162}00162\ \ \ \ \ \textcolor{comment}{//\ シェーダーをコンパイル}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00163}00163\ \ \ \ \ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00164}00164\ \ \ \ \ \mbox{\hyperlink{_typedef_8h_a70c1fcc1a4e96af8f6580f708657cd41}{u32}}\ compile\_flags\ =\ D3DCOMPILE\_OPTIMIZATION\_LEVEL3;}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00165}00165\ \ \ \ \ compile\_flags\ |=\ D3DCOMPILE\_PACK\_MATRIX\_ROW\_MAJOR;}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00166}00166\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00167}00167\ \textcolor{preprocessor}{\#if\ defined(\_DEBUG)}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00168}00168\ \ \ \ \ \textcolor{comment}{//\ GraphicDebuggingツール用にシェーダーデバッグ向け設定}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00169}00169\ \ \ \ \ compile\_flags\ |=\ D3DCOMPILE\_DEBUG\ |\ D3DCOMPILE\_SKIP\_OPTIMIZATION;}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00170}00170\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00171}00171\ \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00172}00172\ \textcolor{comment}{\ \ \ \ //!\ シェーダーモデル名}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00173}00173\ \textcolor{comment}{}\ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ target\_names[]\{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00174}00174\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}vs\_5\_0"{}},\ \ \ \ \textcolor{comment}{//\ DX\_SHADERTYPE\_VERTEX\ \ \ //\ 頂点シェーダー}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00175}00175\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}ps\_5\_0"{}},\ \ \ \ \textcolor{comment}{//\ DX\_SHADERTYPE\_PIXEL\ \ \ \ //\ ピクセルシェーダー}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00176}00176\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}gs\_5\_0"{}},\ \ \ \ \textcolor{comment}{//\ DX\_SHADERTYPE\_GEOMETRY\ //\ ジオメトリシェーダー}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00177}00177\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}cs\_5\_0"{}},\ \ \ \ \textcolor{comment}{//\ DX\_SHADERTYPE\_COMPUTE\ \ //\ コンピュートシェーダー}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00178}00178\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}ds\_5\_0"{}},\ \ \ \ \textcolor{comment}{//\ DX\_SHADERTYPE\_DOMAIN\ \ \ //\ ドメインシェーダー}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00179}00179\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}hs\_5\_0"{}},\ \ \ \ \textcolor{comment}{//\ DX\_SHADERTYPE\_HULL\ \ \ \ \ //\ ハルシェーダー}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00180}00180\ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00181}00181\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00182}00182\ \ \ \ \ \textcolor{keyword}{auto}\ compile\_shader\_variant\ =\ [\&](\mbox{\hyperlink{_typedef_8h_a70c1fcc1a4e96af8f6580f708657cd41}{u32}}\ index)\ -\/>\ \textcolor{keywordtype}{int}\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00183}00183\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \#define\ SHADER\_VARIANT\ \ index\ の形式でプリプロセッサ定義}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00184}00184\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ number\_string\ =\ std::to\_string(index);}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00185}00185\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00186}00186\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ D3D\_SHADER\_MACRO\ defines[]\{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00187}00187\ \ \ \ \ \ \ \ \ \ \ \ \ \{\textcolor{stringliteral}{"{}SHADER\_VARIANT"{}},\ number\_string.c\_str()\},}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00188}00188\ \ \ \ \ \ \ \ \ \ \ \ \ \{\ \ \ \ \ \ \ \ \ \textcolor{keyword}{nullptr},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{nullptr}\},}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00189}00189\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00190}00190\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00191}00191\ \ \ \ \ \ \ \ \ Microsoft::WRL::ComPtr<ID3DBlob>\ byte\_code\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00192}00192\ \ \ \ \ \ \ \ \ Microsoft::WRL::ComPtr<ID3DBlob>\ errors;}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00193}00193\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00194}00194\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ hr\ =\ D3DCompile(source.data(),\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ [in]\ \ ソースコードのメモリ上のアドレス}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00195}00195\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ source.size(),\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ [in]\ \ ソースコードサイズ}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00196}00196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_precompile_8cpp_a519b42bb9e2e54f0a92b1a75678dea07}{convertTo}}(source\_path).c\_str(),\ \ \ \ \textcolor{comment}{//\ [in]}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00197}00197\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ソースコードのファイルパス(使用しない場合はnullptr)}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00198}00198\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ defines,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ [in]\ \ プリプロセッサマクロ定義}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00199}00199\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D3D\_COMPILE\_STANDARD\_FILE\_INCLUDE,\ \ \ \ \textcolor{comment}{//\ [in]}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00200}00200\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ カスタムインクルード処理}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00201}00201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}main"{}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ [in]\ \ 関数名}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00202}00202\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ target\_names[\mbox{\hyperlink{class_shader_base_a576b747d3445083d36b1ff7a96716f90}{type\_}}],\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ [in]\ \ シェーダーモデル名}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00203}00203\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ compile\_flags,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ [in]\ \ コンパイラフラグ\ \ (D3DCOMPILE\_xxxx)}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00204}00204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ [in]\ \ コンパイラフラグ2\ (D3DCOMPILE\_FLAGS2\_xxxx)}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00205}00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&byte\_code,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ [out]\ コンパイルされたバイトコード}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00206}00206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&errors);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ [out]\ エラーメッセージ}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00207}00207\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00208}00208\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ エラー警告出力}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00209}00209\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(errors\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00210}00210\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 「出力」ウィンドウに表示}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00211}00211\ \ \ \ \ \ \ \ \ \ \ \ \ OutputDebugStringA(\textcolor{stringliteral}{"{}-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00212}00212\ \ \ \ \ \ \ \ \ \ \ \ \ OutputDebugStringA((\textcolor{keywordtype}{char}*)errors-\/>GetBufferPointer());}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00213}00213\ \ \ \ \ \ \ \ \ \ \ \ \ OutputDebugStringA(\textcolor{stringliteral}{"{}-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00214}00214\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00215}00215\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ メッセージボックス}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00216}00216\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ file\_name\ =\ \mbox{\hyperlink{_precompile_8cpp_a519b42bb9e2e54f0a92b1a75678dea07}{convertTo}}(source\_path);}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00217}00217\ \ \ \ \ \ \ \ \ \ \ \ \ MessageBox(DxLib::GetMainWindowHandle(),\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(errors-\/>GetBufferPointer()),\ file\_name.c\_str(),}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00218}00218\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MB\_ICONWARNING\ |\ MB\_OK);}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00219}00219\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00220}00220\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00221}00221\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(FAILED(hr))\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00222}00222\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00223}00223\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00224}00224\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00225}00225\ \ \ \ \ \ \ \ \ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00226}00226\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ [DxLib]\ シェーダーを作成}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00227}00227\ \ \ \ \ \ \ \ \ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00228}00228\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ shader\_ptr\ \ =\ byte\_code-\/>GetBufferPointer();\ \ \ \ \textcolor{comment}{//\ シェーダーバイナリの先頭アドレス}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00229}00229\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \ \ \ \ \ \ \ shader\_size\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(byte\_code-\/>GetBufferSize());\ \ \ \ \textcolor{comment}{//\ シェーダーバイナリのサイズ}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00230}00230\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ handle\ \ \ \ \ \ =\ -\/1;}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00231}00231\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00232}00232\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}(\mbox{\hyperlink{class_shader_base_a576b747d3445083d36b1ff7a96716f90}{type\_}})\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00233}00233\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DX\_SHADERTYPE\_VERTEX:\ \ \ \ \textcolor{comment}{//\ 頂点シェーダー}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00234}00234\ \ \ \ \ \ \ \ \ \ \ \ \ handle\ =\ LoadVertexShaderFromMem(shader\_ptr,\ shader\_size);}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00235}00235\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00236}00236\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DX\_SHADERTYPE\_PIXEL:\ \ \ \ \textcolor{comment}{//\ ピクセルシェーダー}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00237}00237\ \ \ \ \ \ \ \ \ \ \ \ \ handle\ =\ LoadPixelShaderFromMem(shader\_ptr,\ shader\_size);}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00238}00238\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00239}00239\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DX\_SHADERTYPE\_GEOMETRY:\ \ \ \ \textcolor{comment}{//\ ジオメトリシェーダー}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00240}00240\ \ \ \ \ \ \ \ \ \ \ \ \ handle\ =\ LoadGeometryShaderFromMem(shader\_ptr,\ shader\_size);}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00241}00241\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00242}00242\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00243}00243\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00244}00244\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00245}00245\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00246}00246\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ handle;}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00247}00247\ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00248}00248\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00249}00249\ \ \ \ \ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00250}00250\ \ \ \ \ \textcolor{comment}{//\ シェーダーバリエーションコンパイル}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00251}00251\ \ \ \ \ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00252}00252\ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{_typedef_8h_a70c1fcc1a4e96af8f6580f708657cd41}{u32}}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{class_shader_base_a51245f424c7149da9229df13629f53a9}{handles\_}}.size();\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00253}00253\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ コンパイル}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00254}00254\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ handle\ =\ compile\_shader\_variant(i);}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00255}00255\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00256}00256\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ シェーダー作成が成功したら旧シェーダーを解放して置換}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00257}00257\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(handle\ ==\ -\/1)\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00258}00258\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00259}00259\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00260}00260\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00261}00261\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{class_shader_base_a51245f424c7149da9229df13629f53a9}{handles\_}}[i]\ !=\ -\/1)\ \{}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00262}00262\ \ \ \ \ \ \ \ \ \ \ \ \ DeleteShader(\mbox{\hyperlink{class_shader_base_a51245f424c7149da9229df13629f53a9}{handles\_}}[i]);}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00263}00263\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00264}00264\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_shader_base_a51245f424c7149da9229df13629f53a9}{handles\_}}[i]\ =\ handle;}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00265}00265\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00266}00266\ }
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00267}00267\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_shader_8cpp_source_l00268}00268\ \}}

\end{DoxyCode}
